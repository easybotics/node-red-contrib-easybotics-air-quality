<script type="text/javascript">
	RED.nodes.registerType('mux-handle', 
		{
			category: 'config', 
			defaults: 
			{
				name: {value:""}, 
				autoConfigC02: {value: "auto", required: true},
			}, 

			oneditprepare: function ()
			{
			},

			icon: "arrow-in.png", 
			label: "MUX HANDLE",
		});
</script>

<script type="text/x-red" data-template-name="mux-handle">
	<p>
		<b> auto calibration:</b> <br>
		auto calibration on the MHZ19 C02 sensor pins the lowest value read in 24 hours to 400ppm <br> 
		probably should be kept off if your sensor is located indoors
	</p>

	<div class="form-row">
		<label for="node-config-input-autoConfigC02"> <i class= "icon-bookmark"></i>Automatic C02 calibration</label>
		<select id = "node-config-input-autoConfigC02">
			<option value="auto"> auto </option>
			<option value="man"> manual <option>
		</select>

	</div>
</script>

<script type="text/x-red" data-help-name="mux-handle">
	<p>
		<b> Version 1.0, I bet it crashes if it can't get a hold of its serial port... </b>
	</p> 
</script>
		
<script type="text/javascript">
	RED.nodes.registerType('MHZ19-C02-Sensor', 
	{
		category: 'Air Quality', 
		color: '#D7A1D1', 
		defaults: 
		{
			name: {value:""},
            handle: { type:'mux-handle', required:true},
		},
		inputs: 1, 
		outputs: 1,
		icon: "arrow-in.png", 
		label: function()
		{
			return this.name || "MH-Z19 C02";
		},
	});
</script>

<script type="text/x-red" data-template-name="MHZ19-C02-Sensor">
	<div class = "form-row">
		<label for="node-config-input-name"><i class="icon-tag"></i> Name </label> 
	</div>
	<div class='form-row'>
		<label for="node-config-input-handle"><i class='fa fa-tag'></i> Handle</label>
		<input type='text' id='node-input-handle'/>
	</div>
</script>

<script type="text/x-red" data-help-name="MHZ19-C02-Sensor">
	<p>
		Outputs the current C02 concentration in PPM <br>
		Automatic calibration, sets the lowest concentration in 24 hours to 400PPM, you can enable or disable this in the MUX-HANDLE config node, it is disabled by default <br><br>
		To manually zero the sensor to 400PPM inject a message with a string payload of 'zero'; do this outdoors or when you think the local c02 level is equal to outdoors
	</p>
</script>


<script type="text/javascript">
	RED.nodes.registerType('PMS5003-PM-Reading', 
	{
		category: 'Air Quality', 
		color: '#C1FF40', 
		defaults: 
		{
			name: {value:""},
            handle: { type:'mux-handle', required:true},
		},
		inputs: 0, 
		outputs: 3,
		icon: "arrow-in.png", 
		label: function()
		{
			return this.name || "PM concentration";
		},
	});
</script>


<script type="text/x-red" data-template-name="PMS5003-PM-Reading">
	<div class = "form-row">
		<label for="node-config-input-name"><i class="icon-tag"></i> Name </label> 
	</div>
	<div class='form-row'>
		<label for="node-config-input-handle"><i class='fa fa-tag'></i> Handle</label>
		<input type='text' id='node-input-handle'/>
	</div>
</script>

<script type="text/x-red" data-help-name="PMS5003-PM-Reading">
	<p>
		Three outputs: <br> 
		<b> PM 1.0: </b> <br>
		<b> PM 2.5: </b> <br>
		<b> PM 10: </b> <br>
	</p> 
</script>

<script type="text/javascript">
	RED.nodes.registerType('PMS5003-Particle-Concentration', 
	{
		category: 'Air Quality', 
		color: '#C1FF40', 
		defaults: 
		{
			name: {value:""},
            handle: { type:'mux-handle', required:true},
		},
		inputs: 0, 
		outputs: 6,
		icon: "arrow-in.png", 
		label: function()
		{
			return this.name || "Particulate per ML of air";
		},
	});
</script>

<script type="text/x-red" data-template-name="PMS5003-Particle-Concentration">
	<div class = "form-row">
		<label for="node-config-input-name"><i class="icon-tag"></i> Name </label> 
	</div>
	<div class='form-row'>
		<label for="node-config-input-handle"><i class='fa fa-tag'></i> Handle</label>
		<input type='text' id='node-input-handle'/>
	</div>
</script>

<script type="text/x-red" data-help-name="PMS5003-Particle-Concentration">
	<p>
		Six outputs: <br> 
		<b> Count of particles above 0.3um diamter in 0.1L of air <br>
		<b> Count of particles above 0.5um diamter in 0.1L of air <br>
		<b> Count of particles above 1.0um diamter in 0.1L of air <br>
		<b> Count of particles above 2.5um diamter in 0.1L of air <br>
		<b> Count of particles above 5.0um diamter in 0.1L of air <br>
		<b> Count of particles above 10um diamter in 0.1L of air <br>
	</p> 
</script>

<script type="text/javascript">
	RED.nodes.registerType('BME280-Parse', 
	{
		category: 'Air Quality', 
		color: '#C1FF40',
		defaults:
		{
			name: {value:""},
		},
		inputs: 1, 
		outputs: 3, 
		icon: "arrow-in.png",
		label: function()
		{
			return this.name || "BME280 Parser";
		},
	});
</script>

<script type="text/x-red" date-template-name="BME280-Parse">
	<div class = "form-row">
		<label for="node-config-input-name"><i class="icon-tag"></i> Name </label>
	</div>
</script>

<script type="text/x-red" data-help-name="BME280-Parse">
	<p>
	Takes the output from the shipped BME-280 node as input <br> <br>
	

	Three outputs: <br>
	<b> Temperature in Celsius <br>
	<b> Percentage Humidity <br>
	<b> Pressure in hPa <br>
	</p>
</script>
